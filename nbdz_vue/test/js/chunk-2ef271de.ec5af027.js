(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ef271de","chunk-d0c3e62c","chunk-180bf072","chunk-2d22c863","chunk-2d0e5da3","chunk-749e3724"],{"707c":function(t,e,n){},"7c5b":function(t,e,n){},"820e":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Tree",{attrs:{data:t.DeptTree},on:{"on-select-change":t.deptTreeChange}})],1)},r=[],i=n("f432"),o={props:{parent:{}},data:function(){return{Depts:[],DeptTree:[],DeptTreeItems:[]}},methods:{loadData:function(){var t=this;t.Depts=[],t.DeptTree=[],t.DeptTreeItems=[];var e={navPropertyPaths:["childrenDept"]};Object(i["getList"])(e).then((function(e){var n=e.data,a=n.data;t.Depts=a,t.loadTree()})).catch((function(t){}))},loadTree:function(){var t=this;t.DeptTree=t.loadDeptChild(t.Depts)},loadDeptChild:function(t){var e=this,n=[];return n=t.map((function(t){if(!t.parentId){var n={expand:!0};return n.title=t.deptName,n.id=t.id,n.value=t.deptCode,t.childrenDept.length>0?n.children=e.loadDeptChildItem(t.childrenDept):n.children=[],n}})).filter((function(t){if(t)return t})),n},loadDeptChildItem:function(t){var e=this,n=[];return n=t.map((function(t){var n={expand:!0};return n.title=t.deptName,n.id=t.id,n.value=t.deptCode,t.childrenDept.length>0?n.children=e.loadDeptChildItem(t.childrenDept):n.children=[],n})),n},deptSelect:function(){(!this.Depts||this.Depts.length<=0)&&this.loadData()},deptTreeChange:function(t){var e=t[0];this.parent.deptChange(e)}},mounted:function(){this.loadData()}},s=o,d=n("2877"),l=Object(d["a"])(s,a,r,!1,null,null,null);e["default"]=l.exports},"95f7":function(t,e,n){"use strict";n.r(e),n.d(e,"getList",(function(){return r})),n.d(e,"getPage",(function(){return i})),n.d(e,"Add",(function(){return o})),n.d(e,"Edit",(function(){return s})),n.d(e,"Delete",(function(){return d})),n.d(e,"getFunctions",(function(){return l})),n.d(e,"saveFunctions",(function(){return u}));var a=n("66df"),r=function(t){return a["default"].request({url:"api/ResRole/GetList",data:t,method:"post"})},i=function(t){return a["default"].request({url:"api/ResRole/GetPage",data:t,method:"post"})},o=function(t){return a["default"].request({url:"api/ResRole/Add",data:t,method:"post"})},s=function(t){return a["default"].request({url:"api/ResRole/Edit",data:t,method:"post"})},d=function(t){return a["default"].request({url:"api/ResRole/Delete/"+t,method:"post"})},l=function(t){return a["default"].request({url:"api/ResRole/GetPermissions/"+t,method:"post"})},u=function(t,e){return a["default"].request({url:"api/ResRole/SaveFunctions/"+t,data:e,method:"post"})}},abe4:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Form",{ref:"formInline",attrs:{"label-position":"right",model:t.Row,rules:t.rule,"label-width":100}},[n("Row",[n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"父级",prop:"parentName",id:"item-parentName"}},[n("Input",{attrs:{search:"","enter-button":"",readonly:""},on:{"on-search":t.deptSelect},model:{value:t.Row.parentName,callback:function(e){t.$set(t.Row,"parentName",e)},expression:"Row.parentName"}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"名称",prop:"deptName"}},[n("Input",{attrs:{clearable:""},model:{value:t.Row.deptName,callback:function(e){t.$set(t.Row,"deptName",e)},expression:"Row.deptName"}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"24"}},[n("FormItem",{attrs:{label:"备注",prop:"remark"}},[n("Input",{attrs:{type:"textarea",clearable:"",autosize:{minRows:2,maxRows:2}},model:{value:t.Row.remark,callback:function(e){t.$set(t.Row,"remark",e)},expression:"Row.remark"}})],1)],1)],1),n("Row",[n("Col",{attrs:{span:"24"}},[n("div",{staticStyle:{"text-align":"center"}},[n("Button",{on:{click:function(e){t.parent.modelEdit=!1}}},[t._v("取消")]),n("Button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary"},on:{click:function(e){return t.save("formInline")}}},[t._v("保存")])],1)])],1)],1),n("Modal",{attrs:{title:"选择部门","mask-closable":!1,width:"300",scrollable:"","footer-hide":""},model:{value:t.modelDept,callback:function(e){t.modelDept=e},expression:"modelDept"}},[n("dept-tree",{attrs:{parent:this}})],1)],1)},r=[],i=(n("7f7f"),n("95f7"),n("f432")),o=n("820e"),s={props:{editRow:Object,parent:Object},computed:{},components:{DeptTree:o["default"]},data:function(){return{Row:{},Roles:[],Depts:[],DeptTree:[],DeptTreeItems:[],modelDept:!1,rule:{deptName:[{required:!0,message:"名称必填",trigger:"blur"}],remark:[{required:!0,message:"备注必填",trigger:"blur"}]}}},watch:{editRow:function(t,e){this.Row=Object.assign({},t),this.Row.parentId&&(this.Row.parentName=this.Row.parentDept.deptName,this.Row.parentId=this.Row.parentDept.id)}},methods:{deptSelect:function(){this.modelDept=!0},deptChange:function(t){this.Row.parentCode=t.value,this.Row.parentName=t.title,this.Row.parentId=t.id;var e=document.getElementById("item-parentName");e.classList.remove("ivu-form-item-error"),this.modelDept=!1},save:function(){this.parent.isAdd?this.saveAdd():this.saveEdit()},saveAdd:function(){var t=this;this.saveValidate().then((function(e){e&&Object(i["Add"])(t.Row).then((function(e){var n=e.data,a=(n.data,n.code),r=n.msg;200==a?(t.$Message.info("添加成功"),t.parent.modelEdit=!1,t.parent.reloadAll(t.Row.parentId)):t.$Message.error({content:r,duration:10,closable:!0})})).catch((function(t){}))}))},saveEdit:function(){var t=this;this.saveValidate().then((function(e){e&&Object(i["Edit"])(t.Row).then((function(e){var n=e.data,a=(n.data,n.code),r=n.msg;200==a?(t.$Message.info("编辑成功"),t.parent.modelEdit=!1,t.parent.reloadAll(t.Row)):t.$Message.error({content:r,duration:10,closable:!0})})).catch((function(t){}))}))},saveValidate:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"formInline";return this.$refs[e].validate((function(e){return!!e||(t.$Message.warning("请检查表单数据！"),!1)}))},handleReset:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"formInline";this.$refs[t].resetFields()}},mounted:function(){}},d=s,l=n("2877"),u=Object(l["a"])(d,a,r,!1,null,null,null);e["default"]=u.exports},bb92:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-main"},[n("Split",{model:{value:t.split1,callback:function(e){t.split1=e},expression:"split1"}},[n("div",{staticClass:"demo-split-pane",attrs:{slot:"left",max:"300",min:"300"},slot:"left"},[n("h3",[t._v("组织结构")]),n("dept-tree",{ref:"deptTree",attrs:{parent:this}})],1),n("div",{staticClass:"demo-split-pane",attrs:{slot:"right"},slot:"right"},[n("h3",[t._v("同级及下级")]),n("div",{staticClass:"button-top-warp"},[n("Button",{staticClass:"search-btn",attrs:{type:"success",size:"small"},on:{click:t.handleAdd}},[n("Icon",{attrs:{type:"md-add"}}),t._v("  新增\n        ")],1)],1),n("div",[n("Collapse",{attrs:{simple:""}},t._l(t.listData,(function(e,a){return n("Panel",{key:a},[n("div",{staticStyle:{width:"80%",display:"inline-block",position:"relative"}},[t._v("\n              "+t._s(e.deptName)+"\n              "),n("div",{staticStyle:{position:"absolute",right:"0",top:"0"}},[n("Button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",size:"small"},on:{click:function(n){return t.handleEdit(e)}}},[t._v("编辑")]),n("Button",{attrs:{type:"error",size:"small"},on:{click:function(n){return t.handleDelete(e)}}},[t._v("删除")])],1)]),n("p",{attrs:{slot:"content"},slot:"content"},[n("Table",{ref:"tables",refInFor:!0,attrs:{data:e.resUsers,columns:t.tableColumns,stripe:""}})],1)])})),1)],1)])]),n("Modal",{attrs:{title:"编辑","mask-closable":!1,width:"800",scrollable:"","footer-hide":""},on:{"on-ok":t.saveEdit},model:{value:t.modelEdit,callback:function(e){t.modelEdit=e},expression:"modelEdit"}},[n("Edit",{ref:"edit",attrs:{parent:this,"edit-row":t.eidtRow}})],1)],1)},r=[],i=(n("ac6a"),n("707c"),n("820e")),o=n("abe4"),s=n("f432"),d={data:function(){return{split1:.2,listData:[],pageTotal:0,pageCurrent:1,modelEdit:!1,isAdd:!0,eidtRow:{},selectedId:"",tableColumns:[{title:"编号",key:"id"},{title:"用户名",key:"userName"},{title:"真实姓名",key:"realName"},{title:"电话",key:"phone"},{title:"部门",key:"deptName"},{title:"创建时间",key:"createDate",sortable:!0}]}},components:{DeptTree:i["default"],Edit:o["default"]},methods:{loadData:function(){var t=this,e=this,n={navPropertyPaths:["resUsers"]};Object(s["getList"])(n).then((function(n){var a=n.data;200==a.code?e.listData=a.data:t.$Message.error({content:a.msg,duration:10,closable:!0})}))},getData:function(){var t=this,e=this,n={id:e.selectedId,navPropertyPaths:["resUsers","childrenDept.resUsers","childrenDept.childrenDept"]};e.listData=[],Object(s["Get"])(n).then((function(n){var a=n.data;200==a.code?e.loadChild(a.data):t.$Message.error({content:a.msg,duration:10,closable:!0})})).catch((function(t){}))},loadChild:function(t){var e=this;e.listData.push(t),t.childrenDept.length>0&&t.childrenDept.forEach((function(t){e.loadChild(t)}))},handleDelete:function(t){var e=this,n=t;this.$Modal.confirm({title:"提示",content:"<p>确定要删除["+n.deptCode+"]?</p>",onOk:function(){e.remove(n)},onCancel:function(t){}})},handleAdd:function(){this.$refs.edit.handleReset(),this.modelEdit=!0,this.isAdd=!0,this.eidtRow={}},handleEdit:function(t){this.modelEdit=!0,this.isAdd=!1,this.eidtRow=t},remove:function(t){var e=this,n=t.id;Object(s["Delete"])(n).then((function(t){var n=t.data,a=(n.data,n.code),r=n.msg;200==a?(e.$Message.info("删除成功"),e.getData()):e.$Message.error({content:r,duration:10,closable:!0})})).catch((function(t){}))},saveEdit:function(){this.$refs.edit.Row},deptChange:function(t){var e=this;e.selectedId=t.id,this.getData()},reloadAll:function(t){var e={id:t};this.$refs.deptTree.loadData(),this.deptChange(e)}},mounted:function(){this.loadData()}},l=d,u=(n("c457"),n("2877")),c=Object(u["a"])(l,a,r,!1,null,"d591fb1a",null);e["default"]=c.exports},c457:function(t,e,n){"use strict";var a=n("7c5b"),r=n.n(a);r.a},f432:function(t,e,n){"use strict";n.r(e),n.d(e,"getList",(function(){return r})),n.d(e,"getChildList",(function(){return i})),n.d(e,"Add",(function(){return o})),n.d(e,"Edit",(function(){return s})),n.d(e,"Delete",(function(){return d})),n.d(e,"Get",(function(){return l}));var a=n("66df"),r=function(t){return a["default"].request({url:"api/ResDept/GetList",data:t,method:"post"})},i=function(t){return a["default"].request({url:"api/ResDept/GetChildList/"+t,method:"post"})},o=function(t){var e=t;return a["default"].request({url:"api/ResDept/Add",data:e,method:"post"})},s=function(t){var e=t;return a["default"].request({url:"api/ResDept/Edit",data:e,method:"post"})},d=function(t){return a["default"].request({url:"api/ResDept/Delete/"+t,method:"post"})},l=function(t){return a["default"].request({url:"api/ResDept/Get",data:t,method:"post"})}}}]);